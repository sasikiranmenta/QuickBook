<ion-header>
    <ion-toolbar>
        <ion-text *ngIf="showMessage" [ngClass]="messageClass">{{ errorMessage }}</ion-text>
        <ion-buttons slot="start">
            <ion-menu-button menu="m1"></ion-menu-button>
        </ion-buttons>
        <form [formGroup]="dateGroup">
            <ion-grid>
                <ion-row class="ion-align-items-center">
                    <ion-col size="2">
                        <ion-title>HUID Details</ion-title>
                    </ion-col>
                    <ion-col size="2">
                        <ion-button (click)="showModal()">Add New +</ion-button>
                    </ion-col>
                    <ion-col size="0.5"></ion-col>
                    <ion-col offset="1" size="2" class="ion-justify-content-end">
                        <ion-label>Apply Date Range on</ion-label>
                        <select name="date-range-on" formControlName="dateRangeOn" (change)="getHuidData()">
                            <option value="INSTOCK">Created Date</option>
                            <option value="SALED">Saled Date</option>
                        </select>
                    </ion-col>
                    <ion-col size="2">
                        <ion-item>
                            <ion-label position="stacked">From</ion-label>
                            <ion-input type="date" (ionChange)="getHuidData()" formControlName="fromDate"></ion-input>
                        </ion-item>
                    </ion-col>
                    <ion-col size="2">
                        <ion-item>
                            <ion-label position="stacked">To</ion-label>
                            <ion-input type="date" (ionChange)="getHuidData()" formControlName="toDate"></ion-input>
                        </ion-item>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </form>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-item>
        <ion-checkbox [(ngModel)]="includeSaledData" (ionChange)="onSaleCheckBoxChange()"></ion-checkbox>
        <ion-text>Show Saled details</ion-text>
        <ion-checkbox [(ngModel)]="includeInstockData" (ionChange)="onStockCheckBoxChange()"></ion-checkbox>
        <ion-text>Show Instock details</ion-text>
        <ion-button slot="end" color="primary" (click)="sendEmail($event)">
            <ion-icon name="mail-unread-outline"></ion-icon>
            <ion-spinner *ngIf="emailLoading" name="dots" color="warning"></ion-spinner>
        </ion-button>
        <ion-button slot="end" color="primary" (click)="getPdfWithSelectedDateRange()">Download
            <ion-icon name="download-outline"></ion-icon>
        </ion-button>
    </ion-item>
    <ag-grid-angular (filterChanged)="onFilterChange($event)"
                     style="width: 100%; height: 80%;"
                     class="ag-theme-alpine"
                     [columnDefs]="columnDefs"
                     [defaultColDef]="defaultColDef"
                     [rowData]="rowData"
                     rowSelection="multiple"
                     (gridReady)="onGridReady($event)"
                     (rowDoubleClicked)="onRowEdit($event)"
                     #agGrid></ag-grid-angular>

</ion-content>

<ion-footer>
    <ion-grid class="summary">
        <ion-row>
            <ion-col>
                Type
            </ion-col>
            <ion-col>
                Total Instock Weight
            </ion-col>
            <ion-col>
                Total Saled Weight
            </ion-col>
            <ion-col>
                Number of Items Instock
            </ion-col>
            <ion-col>
                Number of Items saled
            </ion-col>
        </ion-row>
        <ion-row *ngIf="!summaryLoading">
            <ion-col>
                GOLD
            </ion-col>
            <ion-col>
                {{pageSummary.stockDetails.totalGoldWeight | number: '1.3-3'}}
            </ion-col>
            <ion-col>
                {{pageSummary.saleDetails.totalGoldWeight | number: '1.3-3'}}
            </ion-col>
            <ion-col>
                {{ pageSummary.stockDetails.totalGoldItems}}
            </ion-col>
            <ion-col>
                {{ pageSummary.saleDetails.totalGoldItems}}
            </ion-col>
        </ion-row>
        <ion-row *ngIf="!summaryLoading">
            <ion-col>
                SILVER
            </ion-col>
            <ion-col>
                {{pageSummary.stockDetails.totalSilverWeight | number: '1.3-3'}}
            </ion-col>
            <ion-col>
                {{pageSummary.saleDetails.totalSilverWeight | number: '1.3-3'}}
            </ion-col>
            <ion-col>
                {{ pageSummary.stockDetails.totalSilverItems}}
            </ion-col>
            <ion-col>
                {{ pageSummary.saleDetails.totalSilverItems}}
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-footer>


